---
title: "p8105_hw2_ww2745"
author: "ww2745"
date: "2024-10-01"
output: html_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(readxl)
```

# Problem 1
Read and clean the data.

```{r nyc_data}
nyc_tran_df = 
  read_csv(
    "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv",
    na = c("NA", ".", "")) |> 
  janitor::clean_names() |> 
  select(
    line, station_name, station_latitude, station_longitude, starts_with("route"), entry, vending, entrance_type, ada
    ) |>  
  mutate(
    entry = case_match(entry,
                            "YES" ~ TRUE,
                            "NO" ~ FALSE),
    vending = case_match(vending,
                            "YES" ~ TRUE,
                            "NO" ~ FALSE))



  
print(nyc_tran_df, n = 12)

```

The dataset contains the following variables: `r colnames(nyc_tran_df)`. For the previous chunck, we have loaded the NYC transit dataset, clean the variable names, select the columns we desire and change the type of the variable 'entry'. There are `r nrow(nyc_tran_df)` rows and `r ncol(nyc_tran_df)` columns in the `nyc_tran_df`. These data are not tidy.


```{r answer_question, include = FALSE}
station_distinct =
  distinct(
    nyc_tran_df, station_name, line, .keep_all = TRUE
    )

ada_compliant = 
  filter(
    station_distinct, ada == TRUE
  )

```

```{r answer_question_prop, include = FALSE}
a = 
  filter(
    nyc_tran_df, vending == FALSE & entry == TRUE
  ) |> 
  nrow()

b = 
  filter(
    nyc_tran_df, vending == FALSE
  ) |>  
  nrow()

```

+ There are `r nrow(station_distinct)` distinct stations in NYC.

+ `r nrow(ada_compliant)` of them are ADA compliant.

+ The proportion of station entrances / exits without vending allow entrance is `r a/b`.


Reformat the data:
```{r reformat_data}

dist_route_df = station_distinct |> 

mutate_at(vars(route8:route11), as.character) |> 
pivot_longer(
  route1:route11,
  names_to = "route",
  values_to = "train")

head(dist_route_df)
```

 + There are `r nrow(filter(dist_route_df, train == "A"))` distinct stations serve the A train.
 
 + There are `r nrow(filter(dist_route_df, train == "A" & ada == "TRUE"))` distinct stations serve the A train and are ADA compliant.

# Problem 2

Read and create `mr_trash` dataset.
```{r import_data, warning=FALSE}
trash_path = "./data/202409 Trash Wheel Collection Data.xlsx"
mr_trash = 
  read_excel(
  path = trash_path,
  sheet = "Mr. Trash Wheel",
  range = cell_cols("A2:N655")) |> 
  janitor::clean_names() |>  
  drop_na(dumpster) |>  
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

